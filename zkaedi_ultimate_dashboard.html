<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ ZKAEDI Ultimate Performance Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .dashboard-container {
            padding: 20px;
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #00ff88, #0088ff, #8800ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: shimmer 3s ease-in-out infinite alternate;
        }

        @keyframes shimmer {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(180deg); }
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: left 0.5s;
        }

        .metric-card:hover::before {
            left: 100%;
        }

        .metric-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .metric-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .metric-icon {
            font-size: 2em;
            margin-right: 15px;
        }

        .metric-title {
            font-size: 1.2em;
            font-weight: 600;
        }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 0 0 20px currentColor;
        }

        .metric-label {
            color: #cccccc;
            font-size: 0.9em;
        }

        .progress-ring {
            width: 120px;
            height: 120px;
            margin: 20px auto;
        }

        .progress-ring__circle {
            stroke-width: 8;
            fill: transparent;
            r: 52;
            cx: 60;
            cy: 60;
        }

        .progress-ring__background {
            stroke: rgba(255, 255, 255, 0.1);
        }

        .progress-ring__progress {
            stroke: #00ff88;
            stroke-linecap: round;
            transition: stroke-dasharray 0.5s ease;
            filter: drop-shadow(0 0 8px currentColor);
        }

        .badges-section {
            margin-bottom: 30px;
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .badge {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            position: relative;
        }

        .badge.achieved {
            background: rgba(255, 215, 0, 0.1);
            border-color: rgba(255, 215, 0, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .badge-icon {
            font-size: 2em;
            display: block;
            margin-bottom: 10px;
        }

        .badge-name {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .badge-progress {
            background: rgba(255, 255, 255, 0.1);
            height: 6px;
            border-radius: 3px;
            overflow: hidden;
            margin-top: 10px;
        }

        .badge-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #0088ff);
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        .charts-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .chart-canvas {
            width: 100%;
            height: 300px;
        }

        .status-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 255, 136, 0.2);
            border: 1px solid #00ff88;
            border-radius: 25px;
            padding: 10px 20px;
            font-weight: 600;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 5px #00ff88; }
            to { box-shadow: 0 0 20px #00ff88; }
        }

        .hardware-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }

        .hardware-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .hardware-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #00ff88;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 768px) {
            .charts-section {
                grid-template-columns: 1fr;
            }
            
            .metrics-grid {
                grid-template-columns: 1fr;
            }
            
            .badges-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="loading-overlay" id="loadingOverlay">
        <div>
            <div class="loading-spinner"></div>
            <p style="margin-top: 20px; font-size: 1.2em;">Loading Ultimate Performance Dashboard...</p>
        </div>
    </div>

    <div class="status-indicator" id="statusIndicator">
        üü¢ Live Data
    </div>

    <div class="dashboard-container">
        <div class="header">
            <h1>üöÄ ZKAEDI ULTIMATE PERFORMANCE DASHBOARD</h1>
            <p>Real-time AI performance monitoring with Intel Iris Xe optimization</p>
            <p id="lastUpdate">Last Updated: --</p>
        </div>

        <div class="hardware-info">
            <h2>üñ•Ô∏è Hardware Configuration</h2>
            <div class="hardware-grid" id="hardwareGrid">
                <!-- Hardware info will be populated here -->
            </div>
        </div>

        <div class="metrics-grid">
            <!-- Throughput Card -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-icon">‚ö°</span>
                    <span class="metric-title">Throughput</span>
                </div>
                <div class="metric-value" id="throughputValue">--</div>
                <div class="metric-label">operations per second</div>
                <div class="metric-label">Target: 2000+ ops/sec</div>
                <svg class="progress-ring">
                    <circle class="progress-ring__circle progress-ring__background"/>
                    <circle class="progress-ring__circle progress-ring__progress" id="throughputProgress"/>
                </svg>
            </div>

            <!-- Latency Card -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-icon">üöÄ</span>
                    <span class="metric-title">Latency</span>
                </div>
                <div class="metric-value" id="latencyValue">--</div>
                <div class="metric-label">milliseconds</div>
                <div class="metric-label">Target: <1ms</div>
                <svg class="progress-ring">
                    <circle class="progress-ring__circle progress-ring__background"/>
                    <circle class="progress-ring__circle progress-ring__progress" id="latencyProgress"/>
                </svg>
            </div>

            <!-- GPU Utilization Card -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-icon">üéÆ</span>
                    <span class="metric-title">GPU Utilization</span>
                </div>
                <div class="metric-value" id="gpuValue">--</div>
                <div class="metric-label">Intel Iris Xe percentage</div>
                <div class="metric-label">Target: 90%+</div>
                <svg class="progress-ring">
                    <circle class="progress-ring__circle progress-ring__background"/>
                    <circle class="progress-ring__circle progress-ring__progress" id="gpuProgress"/>
                </svg>
            </div>

            <!-- Memory Usage Card -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-icon">üß†</span>
                    <span class="metric-title">Memory Usage</span>
                </div>
                <div class="metric-value" id="memoryValue">--</div>
                <div class="metric-label">64GB Corsair Vengeance</div>
                <div class="metric-label" id="memoryLabel">-- / 64GB</div>
                <svg class="progress-ring">
                    <circle class="progress-ring__circle progress-ring__background"/>
                    <circle class="progress-ring__circle progress-ring__progress" id="memoryProgress"/>
                </svg>
            </div>

            <!-- Error Rate Card -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-icon">üõ°Ô∏è</span>
                    <span class="metric-title">Error Healing</span>
                </div>
                <div class="metric-value" id="errorValue">--</div>
                <div class="metric-label">error rate percentage</div>
                <div class="metric-label">Target: <0.01%</div>
                <svg class="progress-ring">
                    <circle class="progress-ring__circle progress-ring__background"/>
                    <circle class="progress-ring__circle progress-ring__progress" id="errorProgress"/>
                </svg>
            </div>

            <!-- Cache Hit Rate Card -->
            <div class="metric-card">
                <div class="metric-header">
                    <span class="metric-icon">üíæ</span>
                    <span class="metric-title">Cache Performance</span>
                </div>
                <div class="metric-value" id="cacheValue">--</div>
                <div class="metric-label">hit rate percentage</div>
                <div class="metric-label">8TB Samsung 990 Pro</div>
                <svg class="progress-ring">
                    <circle class="progress-ring__circle progress-ring__background"/>
                    <circle class="progress-ring__circle progress-ring__progress" id="cacheProgress"/>
                </svg>
            </div>
        </div>

        <div class="badges-section">
            <h2>üèÜ Performance Achievement Badges</h2>
            <div class="badges-grid" id="badgesGrid">
                <!-- Badges will be populated here -->
            </div>
        </div>

        <div class="charts-section">
            <div class="chart-container">
                <h3>üìà Performance History</h3>
                <canvas id="performanceChart" class="chart-canvas"></canvas>
            </div>
            <div class="chart-container">
                <h3>üìä Resource Utilization</h3>
                <canvas id="resourceChart" class="chart-canvas"></canvas>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        class UltimatePerformanceDashboard {
            constructor() {
                this.data = null;
                this.charts = {};
                this.performanceHistory = [];
                this.resourceHistory = [];
                this.maxHistoryLength = 50;
                
                this.initializeCharts();
                this.startDataFetching();
                
                // Hide loading overlay after initialization
                setTimeout(() => {
                    document.getElementById('loadingOverlay').style.display = 'none';
                }, 1000);
            }

            async fetchData() {
                try {
                    const response = await fetch('/api/performance/dashboard-data');
                    if (response.ok) {
                        this.data = await response.json();
                        document.getElementById('statusIndicator').innerHTML = 'üü¢ Live Data';
                        document.getElementById('statusIndicator').style.borderColor = '#00ff88';
                        return true;
                    }
                } catch (error) {
                    console.log('API not available, using demo data');
                }
                
                // Use demo data
                this.generateDemoData();
                document.getElementById('statusIndicator').innerHTML = 'üü° Demo Mode';
                document.getElementById('statusIndicator').style.borderColor = '#ffaa00';
                return false;
            }

            generateDemoData() {
                const now = new Date();
                this.data = {
                    current_metrics: {
                        timestamp: now.toISOString(),
                        throughput_ops_per_sec: 1200 + Math.random() * 800 + Math.sin(Date.now() / 10000) * 200,
                        latency_ms: 0.3 + Math.random() * 0.7 + Math.sin(Date.now() / 5000) * 0.2,
                        gpu_utilization_percent: 70 + Math.random() * 25 + Math.sin(Date.now() / 8000) * 10,
                        memory_usage_mb: 30720 + Math.random() * 20480,
                        memory_usage_percent: 60 + Math.random() * 25,
                        cpu_usage_percent: 40 + Math.random() * 40,
                        error_rate_percent: Math.random() * 0.02,
                        cache_hit_rate_percent: 92 + Math.random() * 8,
                        active_threads: Math.floor(8 + Math.random() * 8)
                    },
                    badges: {
                        speed_demon: { name: "Speed Demon", description: "Achieve 100+ ops/sec", achieved: true, current_value: 1250, threshold: 100, emoji: "üöÄ" },
                        performance_master: { name: "Performance Master", description: "Achieve 500+ ops/sec", achieved: true, current_value: 1250, threshold: 500, emoji: "üåü" },
                        ultimate_completionist: { name: "Ultimate Completionist", description: "Achieve 1000+ ops/sec", achieved: true, current_value: 1250, threshold: 1000, emoji: "üëë" },
                        gpu_wizard: { name: "GPU Wizard", description: "Achieve 90%+ GPU utilization", achieved: false, current_value: 75, threshold: 90, emoji: "üéÆ" },
                        memory_optimizer: { name: "Memory Optimizer", description: "Perfect memory utilization", achieved: false, current_value: 60, threshold: 85, emoji: "üß†" },
                        latency_destroyer: { name: "Latency Destroyer", description: "Sub-millisecond latency", achieved: true, current_value: 0.8, threshold: 1, emoji: "‚ö°" },
                        error_healing_expert: { name: "Error Healing Expert", description: "Maintain <0.01% error rate", achieved: true, current_value: 0.005, threshold: 0.01, emoji: "üõ°Ô∏è" },
                        benchmark_champion: { name: "Benchmark Champion", description: "Maintain #1 ranking", achieved: false, current_value: 1250, threshold: 2000, emoji: "üìä" }
                    },
                    cache_stats: { hits: 9543 + Math.floor(Math.random() * 100), misses: 457 + Math.floor(Math.random() * 10) },
                    hardware_info: { 
                        cpu_count: 12, 
                        memory_gb: 64, 
                        gpu_available: true, 
                        pool_allocated_mb: 45000 + Math.random() * 10000 
                    }
                };
            }

            updateMetrics() {
                if (!this.data) return;

                const metrics = this.data.current_metrics;
                
                // Update metric values
                document.getElementById('throughputValue').textContent = Math.round(metrics.throughput_ops_per_sec);
                document.getElementById('latencyValue').textContent = metrics.latency_ms.toFixed(2);
                document.getElementById('gpuValue').textContent = metrics.gpu_utilization_percent.toFixed(1) + '%';
                document.getElementById('memoryValue').textContent = metrics.memory_usage_percent.toFixed(1) + '%';
                document.getElementById('errorValue').textContent = (metrics.error_rate_percent * 100).toFixed(3) + '%';
                document.getElementById('cacheValue').textContent = metrics.cache_hit_rate_percent.toFixed(1) + '%';

                // Update memory label
                const memoryGB = (metrics.memory_usage_mb / 1024).toFixed(1);
                document.getElementById('memoryLabel').textContent = `${memoryGB}GB / 64GB`;

                // Update progress rings
                this.updateProgressRing('throughputProgress', (metrics.throughput_ops_per_sec / 2000) * 100, this.getPerformanceColor(metrics.throughput_ops_per_sec, 2000, false));
                this.updateProgressRing('latencyProgress', Math.max(0, 100 - metrics.latency_ms * 100), this.getPerformanceColor(metrics.latency_ms, 1, true));
                this.updateProgressRing('gpuProgress', metrics.gpu_utilization_percent, this.getPerformanceColor(metrics.gpu_utilization_percent, 90, false));
                this.updateProgressRing('memoryProgress', metrics.memory_usage_percent, '#00aaff');
                this.updateProgressRing('errorProgress', Math.max(0, 100 - metrics.error_rate_percent * 10000), this.getPerformanceColor(metrics.error_rate_percent, 0.01, true));
                this.updateProgressRing('cacheProgress', metrics.cache_hit_rate_percent, '#00ffaa');

                // Update timestamp
                document.getElementById('lastUpdate').textContent = `Last Updated: ${new Date(metrics.timestamp).toLocaleTimeString()}`;
            }

            getPerformanceColor(value, target, inverse = false) {
                const ratio = inverse ? target / Math.max(value, 0.001) : value / target;
                if (ratio >= 1) return '#00ff88';
                if (ratio >= 0.8) return '#88ff00';
                if (ratio >= 0.6) return '#ffaa00';
                if (ratio >= 0.4) return '#ff8800';
                return '#ff4444';
            }

            updateProgressRing(elementId, percentage, color) {
                const circle = document.getElementById(elementId);
                const radius = circle.r.baseVal.value;
                const circumference = 2 * Math.PI * radius;
                const offset = circumference - (Math.min(percentage, 100) / 100) * circumference;
                
                circle.style.stroke = color;
                circle.style.strokeDasharray = circumference;
                circle.style.strokeDashoffset = offset;
            }

            updateBadges() {
                if (!this.data) return;

                const badgesGrid = document.getElementById('badgesGrid');
                badgesGrid.innerHTML = '';

                Object.entries(this.data.badges).forEach(([key, badge]) => {
                    const badgeElement = document.createElement('div');
                    badgeElement.className = `badge ${badge.achieved ? 'achieved' : ''}`;
                    
                    const progress = Math.min(100, (badge.current_value / badge.threshold) * 100);
                    
                    badgeElement.innerHTML = `
                        <span class="badge-icon">${badge.emoji}</span>
                        <div class="badge-name">${badge.name}</div>
                        <div style="color: #ccc; font-size: 0.9em;">${badge.description}</div>
                        <div style="margin-top: 10px;">
                            <span style="font-weight: bold;">${badge.current_value.toFixed(1)}</span> / ${badge.threshold}
                        </div>
                        <div class="badge-progress">
                            <div class="badge-progress-fill" style="width: ${progress}%;"></div>
                        </div>
                    `;
                    
                    badgesGrid.appendChild(badgeElement);
                });
            }

            updateHardwareInfo() {
                if (!this.data) return;

                const hardwareGrid = document.getElementById('hardwareGrid');
                const hardware = this.data.hardware_info;
                
                hardwareGrid.innerHTML = `
                    <div class="hardware-item">
                        <div style="font-size: 1.5em;">üñ•Ô∏è</div>
                        <div style="font-weight: bold;">${hardware.cpu_count} Cores</div>
                        <div>Multi-core CPU</div>
                    </div>
                    <div class="hardware-item">
                        <div style="font-size: 1.5em;">üß†</div>
                        <div style="font-weight: bold;">${hardware.memory_gb}GB</div>
                        <div>Corsair Vengeance</div>
                    </div>
                    <div class="hardware-item">
                        <div style="font-size: 1.5em;">üéÆ</div>
                        <div style="font-weight: bold;">${hardware.gpu_available ? 'Available' : 'N/A'}</div>
                        <div>Intel Iris Xe</div>
                    </div>
                    <div class="hardware-item">
                        <div style="font-size: 1.5em;">üíæ</div>
                        <div style="font-weight: bold;">${(hardware.pool_allocated_mb / 1024).toFixed(1)}GB</div>
                        <div>Memory Pool</div>
                    </div>
                `;
            }

            initializeCharts() {
                // Performance History Chart
                const perfCtx = document.getElementById('performanceChart').getContext('2d');
                this.charts.performance = new Chart(perfCtx, {
                    type: 'line',
                    data: {
                        labels: [],
                        datasets: [{
                            label: 'Throughput (ops/sec)',
                            data: [],
                            borderColor: '#00ff88',
                            backgroundColor: 'rgba(0, 255, 136, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Latency (ms)',
                            data: [],
                            borderColor: '#0088ff',
                            backgroundColor: 'rgba(0, 136, 255, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#ffffff' }
                            }
                        },
                        scales: {
                            x: { 
                                ticks: { color: '#ffffff' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y: { 
                                ticks: { color: '#ffffff' },
                                grid: { color: 'rgba(255, 255, 255, 0.1)' }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                ticks: { color: '#ffffff' },
                                grid: { drawOnChartArea: false }
                            }
                        }
                    }
                });

                // Resource Utilization Chart
                const resCtx = document.getElementById('resourceChart').getContext('2d');
                this.charts.resource = new Chart(resCtx, {
                    type: 'doughnut',
                    data: {
                        labels: ['GPU', 'Memory', 'CPU', 'Available'],
                        datasets: [{
                            data: [0, 0, 0, 100],
                            backgroundColor: [
                                '#ff6b6b',
                                '#4ecdc4',
                                '#45b7d1',
                                'rgba(255, 255, 255, 0.1)'
                            ],
                            borderWidth: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: { color: '#ffffff' }
                            }
                        }
                    }
                });
            }

            updateCharts() {
                if (!this.data) return;

                const metrics = this.data.current_metrics;
                const time = new Date().toLocaleTimeString();

                // Update performance history
                this.performanceHistory.push({
                    time,
                    throughput: metrics.throughput_ops_per_sec,
                    latency: metrics.latency_ms
                });

                if (this.performanceHistory.length > this.maxHistoryLength) {
                    this.performanceHistory.shift();
                }

                // Update performance chart
                this.charts.performance.data.labels = this.performanceHistory.map(h => h.time);
                this.charts.performance.data.datasets[0].data = this.performanceHistory.map(h => h.throughput);
                this.charts.performance.data.datasets[1].data = this.performanceHistory.map(h => h.latency);
                this.charts.performance.update('none');

                // Update resource chart
                const used = (metrics.gpu_utilization_percent + metrics.memory_usage_percent + metrics.cpu_usage_percent) / 3;
                this.charts.resource.data.datasets[0].data = [
                    metrics.gpu_utilization_percent,
                    metrics.memory_usage_percent,
                    metrics.cpu_usage_percent,
                    Math.max(0, 100 - used)
                ];
                this.charts.resource.update('none');
            }

            async startDataFetching() {
                await this.fetchData();
                this.updateDashboard();
                
                // Update every 2 seconds
                setInterval(async () => {
                    await this.fetchData();
                    this.updateDashboard();
                }, 2000);
            }

            updateDashboard() {
                this.updateMetrics();
                this.updateBadges();
                this.updateHardwareInfo();
                this.updateCharts();
            }
        }

        // Initialize dashboard when page loads
        document.addEventListener('DOMContentLoaded', () => {
            new UltimatePerformanceDashboard();
        });
    </script>
</body>
</html>